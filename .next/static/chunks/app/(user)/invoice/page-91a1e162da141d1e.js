(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{96141:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,44839,23)),Promise.resolve().then(o.bind(o,31293))},31293:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});var s=o(95155),i=o(12115);let n=e=>{let{userId:t}=e,[o,n]=(0,i.useState)(null),[a,r]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null);console.log("extractId:",t);let d=async()=>{try{let e=await fetch("http://localhost:3000/api/users/".concat(t)),o=await e.json();if(console.log("newData:",o),e.ok)n(o.data);else throw Error(o.message||"Failed to fetch invoice data")}catch(e){c(e.message),console.log(e)}finally{r(!1)}};if((0,i.useEffect)(()=>{d()},[d]),a)return(0,s.jsx)("div",{children:"Loading..."});if(l)return(0,s.jsxs)("div",{children:["Error: ",l]});if(!o||!o.bookings)return(0,s.jsx)("div",{children:"No invoice data available"});let h=(e,t)=>{let o=new Date(e);return Math.ceil(Math.abs(new Date(t)-o)/864e5)},u=async e=>{if(window.confirm("Are you sure to delete this booking?"))try{let t=await fetch("http://localhost:3000/api/users/".concat(e),{method:"DELETE"}),o=await t.json();if(t.ok)n(t=>({...t,bookings:t.bookings.filter(t=>t._id!==e)})),console.log("Booking deleted:",o);else throw Error(o.message||"Failed to delete booking")}catch(e){console.error("Error deleting booking:",e),alert("Failed to delete booking")}};return(0,s.jsxs)("div",{className:"invoice-container",children:[(0,s.jsxs)("h1",{children:["Username: ",o.username]}),o.bookings.length>0?o.bookings.map(e=>{let t=h(e.startDate,e.endDate),o=t*e.price;return(0,s.jsxs)("div",{className:"booking-item",children:[(0,s.jsx)("h3",{children:e.productName}),(0,s.jsxs)("p",{children:["Booking dates from ",e.startDate," to ",e.endDate]}),(0,s.jsxs)("p",{children:["Discount: ",e.offer,"%"]}),(0,s.jsxs)("p",{children:["Number of Days: ",t]}),(0,s.jsxs)("h4",{children:["Price per day: ",e.price]}),(0,s.jsxs)("h4",{children:["Total Amount: ",o]}),(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("button",{onClick:()=>u(e._id),className:"deleteBtn",children:"Delete Booking"})})]},e._id)}):(0,s.jsx)("div",{className:"no-bookings",children:"No bookings available"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[839,441,517,358],()=>t(96141)),_N_E=e.O()}]);