(()=>{var e={};e.id=213,e.ids=[213],e.modules={6037:e=>{"use strict";e.exports=require("mongoose")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},1918:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>g,serverHooks:()=>v,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{GET:()=>m,POST:()=>f});var a=r(2706),o=r(8203),i=r(5994),n=r(2339),u=r(9187);let p=require("fs/promises");var c=r(3873),d=r.n(c),l=r(7150);async function m(){await (0,n.A)();let e=await l.A.find({});return u.NextResponse.json({data:e})}async function f(e){await (0,n.A)();let t=await e.formData(),r=t.get("title"),s=t.get("price"),a=t.get("offer"),o=t.get("amen"),i=t.get("desc"),c=t.get("image"),m=await c.arrayBuffer(),f=Buffer.from(m),g=d().join(process.cwd(),"public","uploads",c.name);try{await (0,p.writeFile)(g,f);let e=new l.A({title:r,price:s,offer:a,amen:o,desc:i,image:`/uploads/${c.name}`});return await e.save(),u.NextResponse.json({response:"Successfully Uploaded",success:!0},{status:201})}catch(e){return console.log(e),u.NextResponse.json({success:!1},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/admin/add-product/route",pathname:"/api/admin/add-product",filename:"route",bundlePath:"app/api/admin/add-product/route"},resolvedPagePath:"C:\\Users\\pardh\\OneDrive\\Desktop\\Next_Resort\\src\\app\\api\\admin\\add-product\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:y,serverHooks:v}=g;function w(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:y})}},6487:()=>{},8335:()=>{},2706:(e,t,r)=>{"use strict";e.exports=r(4870)},2339:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let{default:s}=r(6037),a=async()=>{try{await s.connect(process.env.MONOGO_URI),console.log("Database connected")}catch(e){console.log(e)}}},7150:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let{default:s}=r(6037),a=new s.Schema({title:{type:String,required:!0},desc:{type:String},price:{type:Number,required:!0},offer:{type:String},image:{type:String},amen:{type:[String],default:["Ac","Greyser","Tv","Wi-Fi","Elevator","Break-fast"],set:function(e){return"string"==typeof e&&(e=e.split(",").map(e=>e.trim())),Array.from(new Set(["Ac","Greyser","Tv","Wi-Fi","Elevator","Break-fast",...e]))}}}),o=s.models.product||s.model("product",a)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,187],()=>r(1918));module.exports=s})();